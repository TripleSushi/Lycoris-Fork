-- ExploitTab module.
local ExploitTab = {}

---@module Features.Game.Teleport
local Teleport = require("Features/Game/Teleport")

---Initialize Mob Exploits section.
---@param groupbox table
function ExploitTab.initMobExploitsSection(groupbox)
	local voidMobsToggle = groupbox:AddToggle("VoidMobs", {
		Text = "Void Mobs",
		Tooltip = "Teleport nearby mobs and send them to the void.",
		Default = false,
	})

	voidMobsToggle:AddKeyPicker("VoidMobsKeyBind", { Default = "N/A", SyncToggleState = true, Text = "Void Mobs" })
end

---Initialize Local Character Exploits section.
---@param groupbox table
function ExploitTab.initLocalCharacterExploitsSection(groupbox)
	local moveWhileKnockedToggle = groupbox:AddToggle("MoveWhileKnocked", {
		Text = "Move While Knocked",
		Tooltip = "Move your character while in a knocked down state.",
		Default = false,
	})

	moveWhileKnockedToggle:AddKeyPicker(
		"MoveWhileKnockedKeyBind",
		{ Default = "N/A", SyncToggleState = true, Text = "Move While Knocked" }
	)
end

---Initialize Teleports section.
---@param groupbox table
function ExploitTab.initTeleportsSection(groupbox)
	groupbox:AddButton("Teleport to Eastern Luminant", function()
		Teleport.start("EasternLuminant")
	end)

	groupbox:AddButton("Stop Teleporting", Teleport.stop)
end

---Initialize tab.
---@param window table
function ExploitTab.init(window)
	-- Create tab.
	local tab = window:AddTab("Exploit")

	-- Initialize sections.
	ExploitTab.initMobExploitsSection(tab:AddDynamicGroupbox("Mob Exploits"))
	ExploitTab.initLocalCharacterExploitsSection(tab:AddDynamicGroupbox("Local Character Exploits"))
	ExploitTab.initTeleportsSection(tab:AddDynamicGroupbox("Teleports"))
end

-- Return ExploitTab module.
return ExploitTab
